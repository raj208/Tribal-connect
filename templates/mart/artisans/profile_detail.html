{% extends "base.html" %}
{% block title %}{{ profile.display_name|default:profile.user.username }} | Artisan{% endblock %}

{% block content %}
  <div class="mb-3">
    {% if profile.cover_photo %}
      <img src="{{ profile.cover_photo.url }}" class="img-fluid rounded" alt="cover">
    {% endif %}
  </div>

  <div class="d-flex gap-3 align-items-center">
    {% if profile.profile_photo %}
      <img src="{{ profile.profile_photo.url }}" width="90" height="90" class="rounded-circle" alt="profile">
    {% endif %}
    <div>
      <h2 class="mb-0">{{ profile.display_name|default:profile.user.username }}</h2>
      <div class="text-muted">{{ profile.location }}</div>
      <div class="mt-1"><span class="badge bg-secondary">{{ profile.craft_style }}</span></div>
      <div class="mt-2 small">
        ‚≠ê {{ profile.rating_avg|floatformat:1 }} ({{ profile.rating_count }})
      </div>
    </div>
  </div>

  <hr>

  {% if profile.bio %}
    <h5>About</h5>
    <p>{{ profile.bio }}</p>
  {% endif %}

  {% if profile.maker_story %}
    <h5>Maker Story</h5>
    <p style="white-space: pre-line">{{ profile.maker_story }}</p>
  {% endif %}

  <hr>

  <h5>Gallery</h5>
  <div class="row g-3">
    {% for img in profile.gallery_images.all %}
      <div class="col-6 col-md-3">
        <div class="card">
          <img src="{{ img.image.url }}" class="card-img-top" alt="gallery">
          {% if img.caption %}
            <div class="card-body">
              <div class="small text-muted">{{ img.caption }}</div>
            </div>
          {% endif %}
        </div>
      </div>
    {% empty %}
      <p class="text-muted">No gallery photos yet.</p>
    {% endfor %}
  </div>
{% endblock %}
